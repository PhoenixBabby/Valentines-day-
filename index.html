<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Veerena ðŸ’•</title>

<style>
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #ffc0cb, #ffe4ec);
    overflow: hidden;
    text-align: center;
    color: #ff4d88;
}

/* Envelope Intro */
#intro {
    position: fixed;
    width: 100%;
    height: 100vh;
    background: linear-gradient(135deg, #ffb6c1, #ffc0cb);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 10;
}

#envelope {
    width: 200px;
    cursor: pointer;
    transition: transform 0.6s ease;
}

#envelope:hover { transform: scale(1.1); }

.fadeOut { animation: fadeOut 1s forwards; }
@keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

/* Password */
#passwordScreen { display: none; margin-top: 100px; }

input {
    padding: 12px;
    border-radius: 25px;
    border: none;
    text-align: center;
    width: 200px;
}

/* Main */
#mainContent { display: none; padding: 20px; }

.container {
    margin: auto;
    padding: 25px;
    background: rgba(255,255,255,0.75);
    border-radius: 25px;
    box-shadow: 0 10px 40px rgba(255,105,180,0.3);
    max-width: 420px;
}

/* Gallery */
.gallery {
    display: flex;
    overflow-x: auto;
    gap: 15px;
    margin: 20px 0;
    scroll-snap-type: x mandatory;
}

.gallery img {
    width: 200px;
    height: 260px;
    object-fit: cover;
    border-radius: 20px;
    border: 3px solid #ff69b4;
    flex-shrink: 0;
    scroll-snap-align: center;
}

/* Buttons */
.buttons { position: relative; height: 100px; }

button {
    padding: 12px 25px;
    border-radius: 30px;
    border: none;
    font-weight: bold;
    cursor: pointer;
}

#yesBtn {
    background: #ff69b4;
    color: white;
    position: absolute;
    left: 20%;
}

#noBtn {
    background: white;
    color: #ff69b4;
    border: 2px solid #ff69b4;
    position: absolute;
    left: 55%;
}

/* Celebration */
#celebration {
    display: none;
    margin-top: 20px;
    font-size: 1.4rem;
}

/* Hidden Message Vertical Scroll */
#hiddenMessageContainer {
    display: none;
    margin-top: 20px;
    padding: 10px;
    background: rgba(255,182,193,0.4);
    border-radius: 15px;
    overflow-y: auto;
    max-height: 180px;
}

#hiddenMessage {
    display: block;
    font-size: 1rem;
    white-space: normal;
}

/* Lilies */
.lily {
    position: absolute;
    width: 60px;
    animation: floatDown 12s linear infinite;
    opacity: 0.8;
    will-change: transform;
}

/* Petals */
.petal {
    position: absolute;
    width: 35px;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: 1;
    opacity: 0.9;
    will-change: transform;
}

@keyframes floatDown {
    0% { transform: translateY(-100px) rotate(0deg); }
    100% { transform: translateY(110vh) rotate(360deg); }
}

@keyframes fall {
    0% { transform: translateY(-50px) rotate(0deg); }
    100% { transform: translateY(110vh) rotate(var(--rotate-deg)); }
}
</style>
</head>

<body>

<div id="intro">
    <h2>Tap To Open ðŸ’Œ</h2>
    <img src="envelope.png" id="envelope">
</div>

<div id="passwordScreen">
    <h2>Enter The Secret Word ðŸ’•</h2>
    <input type="password" id="passwordInput" placeholder="Password">
    <br><br>
    <button onclick="checkPassword()">Enter</button>
    <p id="error" style="color:red;"></p>
</div>

<div id="mainContent">
    <div class="container">
        <h2>Veerena ðŸŒ¸</h2>
        <p>Will you be my Valentine?</p>

        <!-- Gallery: only 2 photos -->
        <div class="gallery">
            <img src="photo1.jpg">
            <img src="photo2.jpg">
        </div>

        <div class="buttons">
            <button id="yesBtn">Yes ðŸ’–</button>
            <button id="noBtn">No ðŸ˜¢</button>
        </div>

        <div id="celebration">
            I will never leave you ðŸ’—ðŸŒ·
        </div>

        <!-- Hidden Message Vertical Scroll -->
        <div id="hiddenMessageContainer">
            <div id="hiddenMessage">
                I will always love you baby even on the days it feels hard for both of us to understand each other we will get through thick and thin together and I know you feel the same. Please remember Iâ€™m still the same boy you fell in love with. We are going to close the distance and live the life we want together. Happy valentines my love you really do mean the world to me.
            </div>
        </div>

    </div>
</div>

<audio id="bgMusic">
    <source src="love.mp3" type="audio/mpeg">
</audio>

<script>

/* Envelope */
document.getElementById("envelope").addEventListener("click", () => {
    document.getElementById("intro").classList.add("fadeOut");
    setTimeout(() => {
        document.getElementById("passwordScreen").style.display = "block";
    }, 1000);
});

/* Password */
const correctPassword = "my love";

function checkPassword() {
    if(document.getElementById("passwordInput").value === correctPassword) {
        document.getElementById("passwordScreen").style.display = "none";
        document.getElementById("mainContent").style.display = "block";
        createLilies();
    } else {
        document.getElementById("error").innerText = "Wrong password ðŸ’”";
    }
}

/* Runaway No */
const noBtn = document.getElementById("noBtn");
noBtn.addEventListener("touchstart", moveNo);
noBtn.addEventListener("mouseover", moveNo);

function moveNo() {
    const maxX = window.innerWidth - noBtn.offsetWidth;
    const maxY = window.innerHeight - noBtn.offsetHeight;
    noBtn.style.left = Math.random() * maxX + "px";
    noBtn.style.top = Math.random() * maxY + "px";
}

/* YES BUTTON */
const yesBtn = document.getElementById("yesBtn");
const music = document.getElementById("bgMusic");

yesBtn.addEventListener("click", () => {
    document.getElementById("celebration").style.display = "block";
    
    music.volume = 0.3;  // 30% volume
    music.play();         // no loop

    createPetals();

    // Show hidden message after 10 seconds
    setTimeout(() => {
        document.getElementById("hiddenMessageContainer").style.display = "block";
    }, 10000);
});

/* Optimized Lilies for mobile */
function createLilies() {
    const maxLilies = 8; 
    setInterval(() => {
        const lilies = document.querySelectorAll('.lily');
        if (lilies.length >= maxLilies) return;
        const lily = document.createElement("img");
        lily.src = "lily.png"; // transparent PNG
        lily.classList.add("lily");
        lily.style.left = Math.random() * window.innerWidth + "px";
        document.body.appendChild(lily);
        setTimeout(() => lily.remove(), 12000);
    }, 3000);
}

/* Optimized Petals for mobile with random rotation & speed */
function createPetals() {
    const maxPetals = 25; 
    setInterval(() => {
        const petals = document.querySelectorAll('.petal');
        if (petals.length >= maxPetals) return;

        const petal = document.createElement("img");
        petal.src = "petal.png"; // transparent PNG
        petal.classList.add("petal");
        petal.style.left = Math.random() * window.innerWidth + "px";

        // Random rotation between 90deg and 360deg
        const rotateDeg = Math.floor(90 + Math.random() * 270);
        petal.style.setProperty('--rotate-deg', rotateDeg + 'deg');

        // Random animation duration between 5s and 8s
        const duration = (5 + Math.random() * 3) + "s";
        petal.style.animationDuration = duration;

        document.body.appendChild(petal);
        setTimeout(() => petal.remove(), parseFloat(duration) * 1000);
    }, 400);
}

</script>

</body>
</html>